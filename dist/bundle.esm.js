function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}function n(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(e=o.call(r)).done)&&(l.push(e.value),l.length!==n);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,r){if(n){if("string"==typeof n)return t(n,r);var e={}.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?t(n,r):void 0}}var a={activeDataSets:{},deviceInfo:{},globalData:{}};function o(t,n,r){var e=function(t){return a.activeDataSets[t]}(t);e&&(e[n]=r(e[n]))}var i=new Map;function l(t){var n=function(t){var n=function(n){for(var e=n.target;e&&!e.hasAttribute("observer-click");)e=e.parentElement;if(e){var a=e.getAttribute("observer-click"),l=Date.now();if(i.has(a)&&l-i.get(a)<3e3)return;i.set(a,l),console.log("记录本次点击",a);var c=e.getAttribute("observer-click-data"),u={};if(c)try{u=JSON.parse(c)}catch(t){console.error("解析自定义参数失败",e,t)}var s={id:a,type:"click",target:n.target.tagName,timestamp:Date.now(),position:{x:n.clientX,y:n.clientY},clickUploadData:u};console.log("记录本次点击",s),o(t,"userActions",(function(){return[].concat(r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),[s])}))}};return document.addEventListener("click",n),function(){document.removeEventListener("click",n),i.clear()}}(t);return function(){n()}}var c=null;function u(){var t="id-".concat(Date.now(),"-").concat(Math.random().toString(16).substring(2));!function(t){a.activeDataSets[t]={id:t,startTime:Date.now(),performanceMetrics:[],userActions:[],customData:[]}}(t);var r=function(){var t={};try{var r,e,a,o,i,l,c=null===(r=performance)||void 0===r?void 0:r.timing;null!=c&&c.loadEventEnd&&null!=c&&c.navigationStart&&(t.loadTime=c.loadEventEnd-c.navigationStart),null!=c&&c.domainLookupEnd&&null!=c&&c.domainLookupStart&&(t.dnsTime=c.domainLookupEnd-c.domainLookupStart),null!=c&&c.connectEnd&&null!=c&&c.connectStart&&(t.tcpTime=c.connectEnd-c.connectStart),null!=c&&c.domComplete&&null!=c&&c.domLoading&&(t.domParseTime=c.domComplete-c.domLoading);var u=(null===(e=performance)||void 0===e||null===(a=e.getEntriesByType)||void 0===a?void 0:a.call(e,"paint"))||[],s=n(u,1)[0];null!=s&&s.startTime&&(t.firstPaintTime=s.startTime);var f=n(u,1)[0];null!=f&&f.startTime&&(t.firstContentfulPaint=f.startTime);var d=(null===(o=performance)||void 0===o||null===(i=o.getEntriesByType)||void 0===i?void 0:i.call(o,"largest-contentful-paint"))||[];null!=d&&null!==(l=d[0])&&void 0!==l&&l.startTime&&(t.largestContentfulPaint=d[0].startTime)}catch(t){console.error("收集性能指标时发生错误:",t)}return t}();return o(t,"performanceMetrics",(function(){return[r]})),c=l(t),t}function s(t){var n=function(t){var n=a.activeDataSets[t];return delete a.activeDataSets[t],n}(t);return c&&c(),n}export{u as start,s as stop};
//# sourceMappingURL=bundle.esm.js.map
